
_G.InfiniteAmmoEnabled = false

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local ammoConnection = nil
local currentTool = nil

local function createMainGUI()
    local gui = Instance.new("ScreenGui")
    gui.Name = "MainGUI"
    gui.Parent = game.CoreGui
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- ICON MINIMIZE
    local iconButton = Instance.new("ImageButton")
    iconButton.Name = "MinimizedIcon"
    iconButton.Size = UDim2.new(0, 35, 0, 35)
    iconButton.Position = UDim2.new(0, 100, 0, 110)
    iconButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    iconButton.BorderColor3 = Color3.fromRGB(255, 150, 50)
    iconButton.BorderSizePixel = 2
    iconButton.Image = ""
    iconButton.Visible = false
    iconButton.Active = true
    iconButton.Parent = gui
    
    local iconCorner = Instance.new("UICorner")
    iconCorner.CornerRadius = UDim.new(0, 6)
    iconCorner.Parent = iconButton
    
    local iconLabel = Instance.new("TextLabel")
    iconLabel.Size = UDim2.new(1, 0, 1, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = "∞"
    iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 20
    iconLabel.Parent = iconButton
    
    -- MAIN FRAME (150x180 untuk tambah kills input)
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 150, 0, 180)
    mainFrame.Position = UDim2.new(0, 100, 0, 110)
    mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    mainFrame.BorderColor3 = Color3.fromRGB(255, 150, 50)
    mainFrame.BorderSizePixel = 2
    mainFrame.Active = true
    mainFrame.Visible = true
    mainFrame.Parent = gui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 8)
    mainCorner.Parent = mainFrame
    
    local dragHandle = Instance.new("Frame")
    dragHandle.Name = "DragHandle"
    dragHandle.Size = UDim2.new(1, 0, 0, 22)
    dragHandle.BackgroundTransparency = 1
    dragHandle.Active = true
    dragHandle.Parent = mainFrame
    
    local header = Instance.new("Frame")
    header.Size = UDim2.new(1, 0, 0, 22)
    header.BackgroundTransparency = 1
    header.Parent = mainFrame
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0.7, 0, 1, 0)
    title.Position = UDim2.new(0, 5, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "NAZAM HUB"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 10
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = header
    
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 18, 0, 18)
    closeButton.Position = UDim2.new(1, -20, 0.5, -9)
    closeButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    closeButton.BorderColor3 = Color3.fromRGB(255, 150, 50)
    closeButton.BorderSizePixel = 1
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 10
    closeButton.Parent = header
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 3)
    closeCorner.Parent = closeButton
    
    closeButton.MouseEnter:Connect(function()
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    end)
    
    closeButton.MouseLeave:Connect(function()
        closeButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    end)
    
    local headerLine = Instance.new("Frame")
    headerLine.Size = UDim2.new(0.92, 0, 0, 1)
    headerLine.Position = UDim2.new(0.04, 0, 0, 23)
    headerLine.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
    headerLine.BorderSizePixel = 0
    headerLine.Parent = mainFrame
    
    -- INFINITE AMMO TOGGLE
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0.92, 0, 0, 24)
    toggleBtn.Position = UDim2.new(0.04, 0, 0, 28)
    toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    toggleBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
    toggleBtn.BorderSizePixel = 1
    toggleBtn.Text = "INF AMMO: OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 8
    toggleBtn.Parent = mainFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 4)
    toggleCorner.Parent = toggleBtn
    
    -- WEAPON LABEL
    local weaponLabel = Instance.new("TextLabel")
    weaponLabel.Size = UDim2.new(0.92, 0, 0, 14)
    weaponLabel.Position = UDim2.new(0.04, 0, 0, 56)
    weaponLabel.BackgroundTransparency = 1
    weaponLabel.Text = "None"
    weaponLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    weaponLabel.Font = Enum.Font.Gotham
    weaponLabel.TextSize = 7
    weaponLabel.TextXAlignment = Enum.TextXAlignment.Left
    weaponLabel.Parent = mainFrame
    
    -- KILLS INPUT
    local killsInput = Instance.new("TextBox")
    killsInput.Size = UDim2.new(0.92, 0, 0, 24)
    killsInput.Position = UDim2.new(0.04, 0, 0, 74)
    killsInput.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    killsInput.BorderColor3 = Color3.fromRGB(60, 60, 60)
    killsInput.BorderSizePixel = 1
    killsInput.Text = ""
    killsInput.PlaceholderText = "Kills Amount..."
    killsInput.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
    killsInput.TextColor3 = Color3.fromRGB(255, 255, 255)
    killsInput.Font = Enum.Font.Gotham
    killsInput.TextSize = 8
    killsInput.ClearTextOnFocus = false
    killsInput.Parent = mainFrame
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 4)
    inputCorner.Parent = killsInput
    
    -- SET KILLS BUTTON
    local setKillsBtn = Instance.new("TextButton")
    setKillsBtn.Size = UDim2.new(0.92, 0, 0, 24)
    setKillsBtn.Position = UDim2.new(0.04, 0, 0, 102)
    setKillsBtn.BackgroundColor3 = Color3.fromRGB(25, 100, 25)
    setKillsBtn.BorderColor3 = Color3.fromRGB(80, 255, 80)
    setKillsBtn.BorderSizePixel = 1
    setKillsBtn.Text = "SET KILLS"
    setKillsBtn.TextColor3 = Color3.fromRGB(80, 255, 80)
    setKillsBtn.Font = Enum.Font.GothamBold
    setKillsBtn.TextSize = 8
    setKillsBtn.Parent = mainFrame
    
    local setKillsCorner = Instance.new("UICorner")
    setKillsCorner.CornerRadius = UDim.new(0, 4)
    setKillsCorner.Parent = setKillsBtn
    
    -- CURRENT KILLS DISPLAY
    local killsDisplay = Instance.new("TextLabel")
    killsDisplay.Size = UDim2.new(0.92, 0, 0, 16)
    killsDisplay.Position = UDim2.new(0.04, 0, 0, 130)
    killsDisplay.BackgroundTransparency = 1
    killsDisplay.Text = "Kills: 0"
    killsDisplay.TextColor3 = Color3.fromRGB(100, 255, 100)
    killsDisplay.Font = Enum.Font.GothamBold
    killsDisplay.TextSize = 9
    killsDisplay.Parent = mainFrame
    
    -- STATUS LABEL
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(0.92, 0, 0, 14)
    statusLabel.Position = UDim2.new(0.04, 0, 0, 148)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Ready"
    statusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 7
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = mainFrame
    
    -- CREDIT
    local creditLabel = Instance.new("TextLabel")
    creditLabel.Size = UDim2.new(1, 0, 0, 14)
    creditLabel.Position = UDim2.new(0, 0, 1, -15)
    creditLabel.BackgroundTransparency = 1
    creditLabel.Text = "By: Nazam"
    creditLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
    creditLabel.Font = Enum.Font.Gotham
    creditLabel.TextSize = 7
    creditLabel.Parent = mainFrame
    
    -- UPDATE KILLS DISPLAY
    local function updateKillsDisplay()
        pcall(function()
            if player:FindFirstChild("leaderstats") then
                local kills = player.leaderstats:FindFirstChild("Kills")
                if kills then
                    killsDisplay.Text = "Kills: " .. tostring(kills.Value)
                end
            end
        end)
    end
    
    spawn(function()
        while true do
            updateKillsDisplay()
            wait(0.5)
        end
    end)
    
    -- SET KILLS FUNCTION
    setKillsBtn.MouseButton1Click:Connect(function()
        local amount = tonumber(killsInput.Text)
        
        if amount and amount >= 0 then
            pcall(function()
                if player:FindFirstChild("leaderstats") then
                    local kills = player.leaderstats:FindFirstChild("Kills")
                    if kills then
                        kills.Value = amount
                        statusLabel.Text = "Kills Set!"
                        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
                        
                        setKillsBtn.Text = "✓"
                        setKillsBtn.BackgroundColor3 = Color3.fromRGB(35, 120, 35)
                        
                        wait(1)
                        
                        setKillsBtn.Text = "SET KILLS"
                        setKillsBtn.BackgroundColor3 = Color3.fromRGB(25, 100, 25)
                        statusLabel.Text = "Ready"
                        statusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
                        
                        killsInput.Text = ""
                        updateKillsDisplay()
                    end
                end
            end)
        else
            statusLabel.Text = "Invalid!"
            statusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
            wait(1)
            statusLabel.Text = "Ready"
            statusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
        end
    end)
    
    setKillsBtn.MouseEnter:Connect(function()
        setKillsBtn.BackgroundColor3 = Color3.fromRGB(35, 120, 35)
    end)
    
    setKillsBtn.MouseLeave:Connect(function()
        setKillsBtn.BackgroundColor3 = Color3.fromRGB(25, 100, 25)
    end)
    
    -- INFINITE AMMO LOGIC
    local function updateInfiniteAmmo()
        if ammoConnection then
            ammoConnection:Disconnect()
            ammoConnection = nil
        end
        
        if _G.InfiniteAmmoEnabled then
            ammoConnection = RunService.Heartbeat:Connect(function()
                pcall(function()
                    if player.Character then
                        local tool = player.Character:FindFirstChildOfClass("Tool")
                        
                        if tool then
                            if currentTool ~= tool then
                                currentTool = tool
                                weaponLabel.Text = tool.Name
                            end
                            
                            local currentAmmo = tool:FindFirstChild("CurrentAmmo", true)
                            
                            if currentAmmo and (currentAmmo:IsA("IntValue") or currentAmmo:IsA("NumberValue")) then
                                if currentAmmo.Value < 999 then
                                    currentAmmo.Value = 999
                                end
                            end
                        else
                            if currentTool then
                                currentTool = nil
                                weaponLabel.Text = "None"
                            end
                        end
                    end
                end)
            end)
            
            statusLabel.Text = "Ammo Active"
        else
            currentTool = nil
            weaponLabel.Text = "None"
            statusLabel.Text = "Ready"
        end
    end
    
    toggleBtn.MouseButton1Click:Connect(function()
        _G.InfiniteAmmoEnabled = not _G.InfiniteAmmoEnabled
        
        if _G.InfiniteAmmoEnabled then
            toggleBtn.Text = "INF AMMO: ON"
            toggleBtn.TextColor3 = Color3.fromRGB(255, 200, 100)
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 75, 25)
            toggleBtn.BorderColor3 = Color3.fromRGB(255, 150, 50)
        else
            toggleBtn.Text = "INF AMMO: OFF"
            toggleBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
            toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            toggleBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
        end
        
        updateInfiniteAmmo()
    end)
    
    toggleBtn.MouseEnter:Connect(function()
        if _G.InfiniteAmmoEnabled then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(120, 90, 30)
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        end
    end)
    
    toggleBtn.MouseLeave:Connect(function()
        if _G.InfiniteAmmoEnabled then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 75, 25)
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        end
    end)
    
    -- MINIMIZE/MAXIMIZE
    local isMinimized = false
    
    closeButton.MouseButton1Click:Connect(function()
        if not isMinimized then
            mainFrame.Visible = false
            iconButton.Visible = true
            isMinimized = true
        end
    end)
    
    iconButton.MouseButton1Click:Connect(function()
        if isMinimized then
            mainFrame.Visible = true
            iconButton.Visible = false
            isMinimized = false
        end
    end)
    
    -- DRAG SYSTEM
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos = false, nil, nil
    
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    local iconDragging, iconDragStart, iconStartPos, dragThreshold, iconDragMoved = false, nil, nil, 5, false
    
    iconButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            iconDragging = true
            iconDragStart = input.Position
            iconStartPos = iconButton.Position
            iconDragMoved = false
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    iconDragging = false
                    if not iconDragMoved and isMinimized then
                        mainFrame.Visible = true
                        iconButton.Visible = false
                        isMinimized = false
                    end
                end
            end)
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if iconDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - iconDragStart
            if math.abs(delta.X) > dragThreshold or math.abs(delta.Y) > dragThreshold then
                iconDragMoved = true
            end
            iconButton.Position = UDim2.new(iconStartPos.X.Scale, iconStartPos.X.Offset + delta.X, iconStartPos.Y.Scale, iconStartPos.Y.Offset + delta.Y)
        end
    end)
    
    player.CharacterAdded:Connect(function()
        task.wait(0.5)
        currentTool = nil
        weaponLabel.Text = "None"
    end)
end

createMainGUI()

print("============================")
print("NAZAM HUB LOADED!")
print("============================")
print("- Infinite Ammo")
print("- Custom Kills")
print("============================")
