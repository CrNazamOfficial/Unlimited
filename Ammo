
_G.InfiniteAmmoEnabled = false
_G.NoReloadEnabled = false

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local ammoConnection = nil
local currentTool = nil

local function hookReloadSystem()
    if not ReplicatedStorage:FindFirstChild("WeaponsSystem") then
        return false
    end
    
    local weaponSystem = ReplicatedStorage:FindFirstChild("WeaponsSystem")
    local network = weaponSystem:FindFirstChild("Network")
    
    if network and network:FindFirstChild("WeaponReloadRequest") then
        local oldFireServer = network.WeaponReloadRequest.FireServer
        
        network.WeaponReloadRequest.FireServer = function(self, ...)
            if _G.NoReloadEnabled then
                return
            end
            return oldFireServer(self, ...)
        end
        
        return true
    end
    
    return false
end

local function createInfiniteAmmoGUI()
    local gui = Instance.new("ScreenGui")
    gui.Name = "InfiniteAmmoGUI"
    gui.Parent = game.CoreGui
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    local iconButton = Instance.new("ImageButton")
    iconButton.Name = "MinimizedIcon"
    iconButton.Size = UDim2.new(0, 35, 0, 35)
    iconButton.Position = UDim2.new(0, 100, 0, 110)
    iconButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    iconButton.BorderColor3 = Color3.fromRGB(255, 150, 50)
    iconButton.BorderSizePixel = 2
    iconButton.Image = ""
    iconButton.Visible = false
    iconButton.Active = true
    iconButton.Parent = gui
    
    local iconCorner = Instance.new("UICorner")
    iconCorner.CornerRadius = UDim.new(0, 6)
    iconCorner.Parent = iconButton
    
    local iconLabel = Instance.new("TextLabel")
    iconLabel.Size = UDim2.new(1, 0, 1, 0)
    iconLabel.BackgroundTransparency = 1
    iconLabel.Text = "âˆž"
    iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 20
    iconLabel.Parent = iconButton
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 140, 0, 140)
    mainFrame.Position = UDim2.new(0, 100, 0, 110)
    mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    mainFrame.BorderColor3 = Color3.fromRGB(255, 150, 50)
    mainFrame.BorderSizePixel = 2
    mainFrame.Active = true
    mainFrame.Visible = true
    mainFrame.Parent = gui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 8)
    mainCorner.Parent = mainFrame
    
    local dragHandle = Instance.new("Frame")
    dragHandle.Name = "DragHandle"
    dragHandle.Size = UDim2.new(1, 0, 0, 22)
    dragHandle.BackgroundTransparency = 1
    dragHandle.Active = true
    dragHandle.Parent = mainFrame
    
    local header = Instance.new("Frame")
    header.Size = UDim2.new(1, 0, 0, 22)
    header.BackgroundTransparency = 1
    header.Parent = mainFrame
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(0.7, 0, 1, 0)
    title.Position = UDim2.new(0, 5, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "INF AMMO"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 10
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = header
    
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 18, 0, 18)
    closeButton.Position = UDim2.new(1, -20, 0.5, -9)
    closeButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    closeButton.BorderColor3 = Color3.fromRGB(255, 150, 50)
    closeButton.BorderSizePixel = 1
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 10
    closeButton.Parent = header
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 3)
    closeCorner.Parent = closeButton
    
    closeButton.MouseEnter:Connect(function()
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    end)
    
    closeButton.MouseLeave:Connect(function()
        closeButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    end)
    
    local headerLine = Instance.new("Frame")
    headerLine.Size = UDim2.new(0.92, 0, 0, 1)
    headerLine.Position = UDim2.new(0.04, 0, 0, 23)
    headerLine.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
    headerLine.BorderSizePixel = 0
    headerLine.Parent = mainFrame
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0.92, 0, 0, 24)
    toggleBtn.Position = UDim2.new(0.04, 0, 0, 28)
    toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    toggleBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
    toggleBtn.BorderSizePixel = 1
    toggleBtn.Text = "OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 9
    toggleBtn.Parent = mainFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 4)
    toggleCorner.Parent = toggleBtn
    
    local noReloadBtn = Instance.new("TextButton")
    noReloadBtn.Size = UDim2.new(0.92, 0, 0, 24)
    noReloadBtn.Position = UDim2.new(0.04, 0, 0, 56)
    noReloadBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    noReloadBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
    noReloadBtn.BorderSizePixel = 1
    noReloadBtn.Text = "NO RELOAD: OFF"
    noReloadBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
    noReloadBtn.Font = Enum.Font.GothamBold
    noReloadBtn.TextSize = 8
    noReloadBtn.Parent = mainFrame
    
    local noReloadCorner = Instance.new("UICorner")
    noReloadCorner.CornerRadius = UDim.new(0, 4)
    noReloadCorner.Parent = noReloadBtn
    
    local weaponLabel = Instance.new("TextLabel")
    weaponLabel.Size = UDim2.new(0.92, 0, 0, 16)
    weaponLabel.Position = UDim2.new(0.04, 0, 0, 84)
    weaponLabel.BackgroundTransparency = 1
    weaponLabel.Text = "None"
    weaponLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    weaponLabel.Font = Enum.Font.Gotham
    weaponLabel.TextSize = 8
    weaponLabel.TextXAlignment = Enum.TextXAlignment.Left
    weaponLabel.Parent = mainFrame
    
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(0.92, 0, 0, 14)
    statusLabel.Position = UDim2.new(0.04, 0, 0, 100)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Ready"
    statusLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 7
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = mainFrame
    
    local creditLabel = Instance.new("TextLabel")
    creditLabel.Size = UDim2.new(1, 0, 0, 14)
    creditLabel.Position = UDim2.new(0, 0, 1, -15)
    creditLabel.BackgroundTransparency = 1
    creditLabel.Text = "By: Nazam"
    creditLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
    creditLabel.Font = Enum.Font.Gotham
    creditLabel.TextSize = 7
    creditLabel.Parent = mainFrame
    
    local function findAmmoValue(tool)
        for _, child in pairs(tool:GetDescendants()) do
            if child:IsA("IntValue") or child:IsA("NumberValue") then
                local name = string.lower(child.Name)
                if string.find(name, "ammo") or string.find(name, "mag") or string.find(name, "clip") then
                    if not string.find(name, "max") and not string.find(name, "total") then
                        return child
                    end
                end
            end
        end
        
        local config = tool:FindFirstChild("Configuration")
        if config then
            return config:FindFirstChild("CurrentAmmo") or config:FindFirstChild("Ammo")
        end
        
        return nil
    end
    
    local function findMaxAmmoValue(tool)
        for _, child in pairs(tool:GetDescendants()) do
            if child:IsA("IntValue") or child:IsA("NumberValue") then
                local name = string.lower(child.Name)
                if string.find(name, "max") and (string.find(name, "ammo") or string.find(name, "mag") or string.find(name, "clip")) then
                    return child
                end
            end
        end
        
        local config = tool:FindFirstChild("Configuration")
        if config then
            return config:FindFirstChild("MaxAmmo") or config:FindFirstChild("MagSize")
        end
        
        return nil
    end
    
    local function updateInfiniteAmmo()
        if ammoConnection then
            ammoConnection:Disconnect()
            ammoConnection = nil
        end
        
        if _G.InfiniteAmmoEnabled then
            ammoConnection = RunService.Heartbeat:Connect(function()
                if player.Character then
                    local tool = player.Character:FindFirstChildOfClass("Tool")
                    
                    if tool then
                        if currentTool ~= tool then
                            currentTool = tool
                            weaponLabel.Text = tool.Name
                        end
                        
                        local ammoValue = findAmmoValue(tool)
                        local maxAmmoValue = findMaxAmmoValue(tool)
                        
                        if ammoValue and maxAmmoValue then
                            ammoValue.Value = maxAmmoValue.Value
                        elseif ammoValue then
                            if ammoValue.Value < 999 then
                                ammoValue.Value = 999
                            end
                        end
                        
                        if _G.NoReloadEnabled and maxAmmoValue then
                            task.spawn(function()
                                pcall(function()
                                    local weaponSystem = ReplicatedStorage:FindFirstChild("WeaponsSystem")
                                    if weaponSystem then
                                        local network = weaponSystem:FindFirstChild("Network")
                                        if network and network:FindFirstChild("WeaponReloadRequest") then
                                            if ammoValue.Value < maxAmmoValue.Value then
                                                ammoValue.Value = maxAmmoValue.Value
                                            end
                                        end
                                    end
                                end)
                            end)
                        end
                    else
                        if currentTool then
                            currentTool = nil
                            weaponLabel.Text = "None"
                        end
                    end
                end
            end)
            
            statusLabel.Text = "Active"
        else
            currentTool = nil
            weaponLabel.Text = "None"
            statusLabel.Text = "Ready"
        end
    end
    
    toggleBtn.MouseButton1Click:Connect(function()
        _G.InfiniteAmmoEnabled = not _G.InfiniteAmmoEnabled
        
        if _G.InfiniteAmmoEnabled then
            toggleBtn.Text = "ON"
            toggleBtn.TextColor3 = Color3.fromRGB(255, 200, 100)
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 75, 25)
            toggleBtn.BorderColor3 = Color3.fromRGB(255, 150, 50)
        else
            toggleBtn.Text = "OFF"
            toggleBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
            toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            toggleBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
        end
        
        updateInfiniteAmmo()
    end)
    
    noReloadBtn.MouseButton1Click:Connect(function()
        _G.NoReloadEnabled = not _G.NoReloadEnabled
        
        if _G.NoReloadEnabled then
            noReloadBtn.Text = "NO RELOAD: ON"
            noReloadBtn.TextColor3 = Color3.fromRGB(100, 255, 100)
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(25, 100, 25)
            noReloadBtn.BorderColor3 = Color3.fromRGB(80, 255, 80)
            hookReloadSystem()
        else
            noReloadBtn.Text = "NO RELOAD: OFF"
            noReloadBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            noReloadBtn.BorderColor3 = Color3.fromRGB(60, 60, 60)
        end
    end)
    
    toggleBtn.MouseEnter:Connect(function()
        if _G.InfiniteAmmoEnabled then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(120, 90, 30)
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        end
    end)
    
    toggleBtn.MouseLeave:Connect(function()
        if _G.InfiniteAmmoEnabled then
            toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 75, 25)
        else
            toggleBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        end
    end)
    
    noReloadBtn.MouseEnter:Connect(function()
        if _G.NoReloadEnabled then
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(35, 120, 35)
        else
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        end
    end)
    
    noReloadBtn.MouseLeave:Connect(function()
        if _G.NoReloadEnabled then
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(25, 100, 25)
        else
            noReloadBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        end
    end)
    
    local isMinimized = false
    
    closeButton.MouseButton1Click:Connect(function()
        if not isMinimized then
            mainFrame.Visible = false
            iconButton.Visible = true
            isMinimized = true
        end
    end)
    
    iconButton.MouseButton1Click:Connect(function()
        if isMinimized then
            mainFrame.Visible = true
            iconButton.Visible = false
            isMinimized = false
        end
    end)
    
    local UIS = game:GetService("UserInputService")
    local dragging, dragStart, startPos = false, nil, nil
    
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    local iconDragging, iconDragStart, iconStartPos, dragThreshold, iconDragMoved = false, nil, nil, 5, false
    
    iconButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            iconDragging = true
            iconDragStart = input.Position
            iconStartPos = iconButton.Position
            iconDragMoved = false
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    iconDragging = false
                    if not iconDragMoved and isMinimized then
                        mainFrame.Visible = true
                        iconButton.Visible = false
                        isMinimized = false
                    end
                end
            end)
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if iconDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - iconDragStart
            if math.abs(delta.X) > dragThreshold or math.abs(delta.Y) > dragThreshold then
                iconDragMoved = true
            end
            iconButton.Position = UDim2.new(iconStartPos.X.Scale, iconStartPos.X.Offset + delta.X, iconStartPos.Y.Scale, iconStartPos.Y.Offset + delta.Y)
        end
    end)
    
    player.CharacterAdded:Connect(function()
        task.wait(0.5)
        currentTool = nil
        weaponLabel.Text = "None"
    end)
end

createInfiniteAmmoGUI()
hookReloadSystem()

print("=========================")
print("INFINITE AMMO UPGRADED!")
print("By: Nazam")
print("=========================")
print("Features:")
print("- Infinite Ammo")
print("- No Reload")
print("- Mini GUI 140x140")
print("=========================")
